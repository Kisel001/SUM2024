//
// mspb.js
//
//      Copyright (C) CGSG of PML30. All rights reserved.
//
// module-library with spb metro db
//

// mspbdb array
export const mspbdb = [
  /*** LINE 1 ***/

  {
    station: "Пулково",
    line: 1,
    id: 0,
    transfer: null,
  },
  {
    station: "Авиагородок",
    line: 1,
    id: 1,
    transfer: null,
  },
  {
    station: "Ульянка",
    line: 1,
    id: 2,
    transfer: null,
  },
  {
    station: "Проспект ветеранов",
    line: 1,
    id: 3,
    transfer: null,
  },
  {
    station: "Ленинский проспект",
    line: 1,
    id: 4,
    transfer: null,
  },
  {
    station: "Автово",
    line: 1,
    id: 5,
    transfer: null,
  },
  {
    station: "Кировский завод",
    line: 1,
    id: 6,
    transfer: ["Путиловская"],
  },
  {
    station: "Нарвская",
    line: 1,
    id: 7,
    transfer: null,
  },
  {
    station: "Балтийская",
    line: 1,
    id: 8,
    transfer: null,
  },
  {
    station: "Технологический институт 1",
    line: 1,
    id: 9,
    transfer: ["Технологический институт 2"],
  },
  {
    station: "Пушкинская",
    line: 1,
    id: 10,
    transfer: ["Звенигородская"],
  },
  {
    station: "Владимирская",
    line: 1,
    id: 11,
    transfer: ["Достоевская"],
  },
  {
    station: "Площадь восстания",
    line: 1,
    id: 12,
    transfer: ["Маяковская", "Знаменская"],
  },
  {
    station: "Чернышевская",
    line: 1,
    id: 13,
    transfer: null,
  },
  {
    station: "Площадь Ленина",
    line: 1,
    id: 14,
    transfer: null,
  },
  {
    station: "Выборгская",
    line: 1,
    id: 15,
    transfer: null,
  },
  {
    station: "Лесная",
    line: 1,
    id: 16,
    transfer: null,
  },
  {
    station: "Площадь мужества",
    line: 1,
    id: 17,
    transfer: null,
  },
  {
    station: "Политехническая",
    line: 1,
    id: 18,
    transfer: null,
  },
  {
    station: "Академическая",
    line: 1,
    id: 19,
    transfer: null,
  },
  {
    station: "Гражданский проспект",
    line: 1,
    id: 20,
    transfer: null,
  },
  {
    station: "Девяткино",
    line: 1,
    id: 21,
    transfer: null,
  },

  /*** LINE 2 ***/

  {
    station: "Шушары",
    line: 2,
    id: 0,
    transfer: null,
  },
  {
    station: "Купчино",
    line: 2,
    id: 1,
    transfer: null,
  },
  {
    station: "Звездная",
    line: 2,
    id: 2,
    transfer: null,
  },
  {
    station: "Московская",
    line: 2,
    id: 3,
    transfer: null,
  },
  {
    station: "Парк победы",
    line: 2,
    id: 4,
    transfer: null,
  },
  {
    station: "Электросила",
    line: 2,
    id: 5,
    transfer: null,
  },
  {
    station: "Московские ворота",
    line: 2,
    id: 6,
    transfer: ["Заставская"],
  },
  {
    station: "Фрунзеская",
    line: 2,
    id: 7,
    transfer: null,
  },
  {
    station: "Технологический институт 2",
    line: 2,
    id: 8,
    transfer: ["Технологический институт 1"],
  },
  {
    station: "Сенная площадь",
    line: 2,
    id: 9,
    transfer: ["Спасская", "Садовая"],
  },
  {
    station: "Невский проспект",
    line: 2,
    id: 10,
    transfer: ["Гостинный двор"],
  },
  {
    station: "Горьковская",
    line: 2,
    id: 11,
    transfer: null,
  },
  {
    station: "Петроградская",
    line: 2,
    id: 12,
    transfer: null,
  },
  {
    station: "Черная речка",
    line: 2,
    id: 13,
    transfer: null,
  },
  {
    station: "Пионерская",
    line: 2,
    id: 14,
    transfer: null,
  },
  {
    station: "Удельная",
    line: 2,
    id: 15,
    transfer: null,
  },
  {
    station: "Озерки",
    line: 2,
    id: 16,
    transfer: null,
  },
  {
    station: "Площадь просвещения",
    line: 2,
    id: 17,
    transfer: null,
  },
  {
    station: "Парнас",
    line: 2,
    id: 18,
    transfer: null,
  },

  /*** LINE 3 ***/

  {
    station: "Рыбацкое",
    line: 3,
    id: 0,
    transfer: null,
  },
  {
    station: "Обухово",
    line: 3,
    id: 1,
    transfer: null,
  },
  {
    station: "Пролетарская",
    line: 3,
    id: 2,
    transfer: null,
  },
  {
    station: "Ломоносовская",
    line: 3,
    id: 3,
    transfer: null,
  },
  {
    station: "Елизаровская",
    line: 3,
    id: 4,
    transfer: null,
  },
  {
    station: "Площадь Александра Невского 1",
    line: 3,
    id: 5,
    transfer: ["Площадь Александра Невского 2"],
  },
  {
    station: "Маяковская",
    line: 3,
    id: 6,
    transfer: ["Площадь восстания", "Знаменская"],
  },
  {
    station: "Гостинный двор",
    line: 3,
    id: 7,
    transfer: ["Невский проспект"],
  },
  {
    station: "Дворцовая",
    line: 3,
    id: 8,
    transfer: ["Адмиралтейская 1"],
  },
  {
    station: "Василеостровская",
    line: 3,
    id: 9,
    transfer: null,
  },
  {
    station: "Приморская",
    line: 3,
    id: 10,
    transfer: null,
  },
  {
    station: "Зенит",
    line: 3,
    id: 11,
    transfer: null,
  },
  {
    station: "Беговая",
    line: 3,
    id: 12,
    transfer: null,
  },

  /*** LINE 4 ***/

  {
    station: "Кудрово",
    line: 4,
    id: 0,
    transfer: null,
  },
  {
    station: "Улица Дыбенко",
    line: 4,
    id: 1,
    transfer: null,
  },
  {
    station: "Проспект Большевиков",
    line: 4,
    id: 2,
    transfer: null,
  },
  {
    station: "Ладожская",
    line: 4,
    id: 3,
    transfer: null,
  },
  {
    station: "Новочеркасская",
    line: 4,
    id: 4,
    transfer: null,
  },
  {
    station: "Площадь Александра Невского 2",
    line: 4,
    id: 5,
    transfer: ["Площадь Александра Невского 1"],
  },
  {
    station: "Лиговский проспект 1",
    line: 4,
    id: 6,
    transfer: ["Лиговский проспект 2"],
  },
  {
    station: "Достоевская",
    line: 4,
    id: 7,
    transfer: ["Владимирская"],
  },
  {
    station: "Спасская",
    line: 4,
    id: 8,
    transfer: ["Сенная площадь", "Садовая"],
  },
  {
    station: "Театральная",
    line: 4,
    id: 9,
    transfer: null,
  },
  {
    station: "Горный институт",
    line: 4,
    id: 10,
    transfer: null,
  },
  {
    station: "Гавань",
    line: 4,
    id: 11,
    transfer: null,
  },
  {
    station: "Морской фасад",
    line: 4,
    id: 12,
    transfer: null,
  },

  /*** LINE 5 ***/

  {
    station: "Автозаводская",
    line: 5,
    id: 0,
    transfer: null,
  },
  {
    station: "Дунайская",
    line: 5,
    id: 1,
    transfer: null,
  },
  {
    station: "Проспект славы",
    line: 5,
    id: 2,
    transfer: null,
  },
  {
    station: "Международная",
    line: 5,
    id: 3,
    transfer: null,
  },
  {
    station: "Бухарестская",
    line: 5,
    id: 4,
    transfer: null,
  },
  {
    station: "Волковская",
    line: 5,
    id: 5,
    transfer: null,
  },
  {
    station: "Обводный канал",
    line: 5,
    id: 6,
    transfer: ["Каретная"],
  },
  {
    station: "Звенигородская",
    line: 5,
    id: 7,
    transfer: ["Пушкинская"],
  },
  {
    station: "Садовая",
    line: 5,
    id: 8,
    transfer: ["Сенная площадь", "Спасская"],
  },
  {
    station: "Адмиралтейская 1",
    line: 5,
    id: 9,
    transfer: ["Дворцовая"],
  },
  {
    station: "Спортивная",
    line: 5,
    id: 10,
    transfer: null,
  },
  {
    station: "Чкаловская",
    line: 5,
    id: 11,
    transfer: null,
  },
  {
    station: "Крестовский остров",
    line: 5,
    id: 12,
    transfer: null,
  },
  {
    station: "Старая деревня",
    line: 5,
    id: 13,
    transfer: null,
  },
  {
    station: "Комендантский проспект",
    line: 5,
    id: 14,
    transfer: null,
  },
  {
    station: "Шуваловский проспект",
    line: 5,
    id: 15,
    transfer: null,
  },

  /*** LINE 6 ***/

  {
    station: "Сосновая поляна",
    line: 6,
    id: 0,
    transfer: null,
  },
  {
    station: "Петергофское шоссе",
    line: 6,
    id: 1,
    transfer: null,
  },
  {
    station: "Улица доблести",
    line: 6,
    id: 2,
    transfer: null,
  },
  {
    station: "Брестская",
    line: 6,
    id: 3,
    transfer: null,
  },
  {
    station: "Юго-Западная",
    line: 6,
    id: 4,
    transfer: null,
  },
  {
    station: "Путиловская",
    line: 6,
    id: 5,
    transfer: ["Кировский завод"],
  },
  {
    station: "Броневая",
    line: 6,
    id: 6,
    transfer: null,
  },
  {
    station: "Заставская",
    line: 6,
    id: 7,
    transfer: ["Московские ворота"],
  },
  {
    station: "Боровая",
    line: 6,
    id: 8,
    transfer: null,
  },
  {
    station: "Каретная",
    line: 6,
    id: 9,
    transfer: ["Обводный канал"],
  },
  {
    station: "Лиговский проспект 2",
    line: 6,
    id: 10,
    transfer: ["Лиговский проспект 1"],
  },
  {
    station: "Знаменская",
    line: 6,
    id: 11,
    transfer: ["Площадь восстания", "Маяковская"],
  },
  {
    station: "Суворовская",
    line: 6,
    id: 12,
    transfer: null,
  },
  {
    station: "Смольный",
    line: 6,
    id: 13,
    transfer: null,
  },
  {
    station: "Полюстровский проспект",
    line: 6,
    id: 14,
    transfer: null,
  },
  {
    station: "Бестужевская",
    line: 6,
    id: 15,
    transfer: null,
  },
  {
    station: "Пискаревка",
    line: 6,
    id: 16,
    transfer: null,
  },
  {
    station: "Ручьи",
    line: 6,
    id: 17,
    transfer: null,
  },
];

export let line1 = [
  [59.79672, 30.2737], // pulkovo
  [59.814773, 30.296555], // aviagorodok
  [59.831206, 30.248419], // ulyanka
  [59.841665, 30.25396], // pr. v
  [59.851038, 30.268188], // len. p.
  [59.86729, 30.261277], // avt
  [59.879602, 30.262023], // kir z
  [59.90117, 30.274932], // nar
  [59.90117, 30.274932], // balt
  [59.916487, 30.318698], // tech. ins
  [59.920542, 30.329747], // push
  [59.927509, 30.348495], // vlad
  [59.93158, 30.360532], // pl. vos
  [59.944548, 30.360002], // chern (ЗАКРЫТО, 239 лохи)
  [59.955718, 30.355743], // pl. len
  [59.971037, 30.347426], // vibor
  [59.984814, 30.34421], // lesnaya
  [59.999584, 30.366533], // pl. myz
  [60.008936, 30.370899], // polit
  [60.01275, 30.395935], // academ
  [60.034978, 30.418186], // graz. pros
  [60.050327, 30.442701], // devyatkino (murino :0)
];

export let line2 = [
  [59.806375, 30.373415], // shusary
  [59.82955, 30.375642], // kupchino :)
  [59.833249, 30.349447], // zvez
  [59.853387, 30.320882], // moskovskaya
  [59.866319, 30.321986], // park pobedy
  [59.879186, 30.318779], // electrosila
  [59.891584, 30.318249], // mosk vor
  [59.906269, 30.317494], // frunzes
  [59.916487, 30.318698], // techn ins
  [59.927058, 30.320458], // senn plos
  [59.935687, 30.327232], // nevs pros
  [59.956169, 30.318716], // gork
  [59.966444, 30.311421], // petr
  [59.985458, 30.300866], // chern rechka
  [60.002499, 30.296743], // pionerskaya
  [60.016685, 30.315697], // udelynaya
  [60.037086, 30.321554], // ozerki
  [60.051419, 30.332496], // prosp. pros
  [60.066908, 30.333915], // parnas
];

export let line3 = [
  [59.830748, 30.500607], // ryb
  [59.84866, 30.45773], // obyh
  [59.865203, 30.470262], // prol
  [59.877285, 30.441758], // lomon
  [59.896702, 30.423648], // eliz
  [59.924406, 30.385784], // pl aleksa
  [59.931233, 30.354801], // mayak
  [59.935687, 30.327232], // gost
  [59.935888, 30.31467], // admiral
  [59.942597, 30.278274], // vasyka (PML 30 forever)
  [59.948239, 30.234849], // primorskaya
  [59.972546, 30.211951], // novokrestovskaya
  [59.98814, 30.203076], // begovaya
];

export let line4 = [
  [59.900759, 30.506086], // kydr
  [59.90741, 30.483404], // ul dyb
  [59.90741, 30.483404], // prop bolysh
  [59.932486, 30.439216], // ladozh
  [59.928997, 30.411802], // novocherk
  [59.923482, 30.383098], // pl. aleks. nevs.
  [59.920745, 30.35525], // ligov. prosp.
  [59.928194, 30.346644], // dost.
  [59.926729, 30.319911], // spasskaya
  [59.925285, 30.296964], // teatr
  [59.932494, 30.260889], // g. ins
  [59.933783, 30.231422], // gavan
  [59.947726, 30.19593], // mor. fasad
];

export let line5 = [
  [59.819938, 30.432487], // avtozavodskaya
  [59.83933, 30.41097], // dunay
  [59.858305, 30.392649], // prosp slavy
  [59.870471, 30.379928], // mezdun
  [59.883804, 30.368503], // byhar
  [59.895839, 30.358111], // volkov
  [59.914725, 30.349792], // obvod chan
  [59.922385, 30.335878], // zven
  [59.926623, 30.317444], // sadovaya
  [59.935888, 30.31467], // admiral
  [59.951886, 30.291344], // sport
  [59.960953, 30.292045], // chkal
  [59.971785, 30.259508], // krest
  [59.989441, 30.255142], // staraya derevnya
  [60.008392, 30.258313], // komen pr
  [60.025281, 30.229569], // sh. pros
];

export let line6 = [
  [59.826025, 30.145622], // sos polyana
  [59.84665, 30.146388], // petergoff s.
  [59.861113, 30.178403], // dobl
  [59.860562, 30.205823], // brest
  [59.859187, 30.230404], // ugo z
  [59.87807, 30.260699], // putilovskaya
  [59.876522, 30.299485], // bronevaya
  [59.892249, 30.318175], // zastavskaya
  [59.901859, 30.338288], // borovaya
  [59.913741, 30.350501], // karetnaya
  [59.92091, 30.35474], // lig - 2
  [59.931452, 30.362079], // znamenskaya
  [59.938178, 30.373839], // suvor
  [59.947085, 30.389476], // smol
  [59.963487, 30.407843], // polus
  [59.976106, 30.435689], // bestuz
  [59.98861, 30.426835], // piskarevka
  [60.006837, 30.448191], // ruchi
];

export let line7 = [];

export let line8 = [
  [59.947098, 30.555561], // yanino
  [59.944822, 30.500057], // ul komunny
  [59.944423, 30.478822], // ind. prospect
  [59.943599, 30.434806], // prosp. energetikov
  [59.943891, 30.412117], // bol. ohot
  [59.938178, 30.373839], // suvor
  [59.944773, 30.35894], // chern
  [59.938178, 30.338816], // mihayl
  [59.936326, 30.314868], // admiral-2
  [59.925522, 30.29759], // teatr-2
  [59.918, 30.280203], // pl. repina
  [59.909038, 30.248657], // dvinskaya
];

/* Get coordinates of station by line number and id */
export function getCoordStation(line, id) {
  let cord;

  switch (line) {
    case 1:
      cord = new Array(line1[id]);
      break;

    case 2:
      cord = new Array(line2[id]);
      break;

    case 3:
      cord = new Array(line3[id]);
      break;

    case 4:
      cord = new Array(line4[id]);
      break;

    case 5:
      cord = new Array(line5[id]);
      break;

    case 6:
      cord = new Array(line6[id]);
      break;

    default:
      alert("SYSTEM ERROR!!!");
      break;
  }

  return cord;
}

export function getLineIdStation(name) {
  for (let i of mspbdb) if (i.station == name) return [i.id, i.line];
  return null;
}

export function getRouteOtherLines(l1, i1, l2, i2) {
  if (l1 > l2) return null;
  let flag1 = false;
  let flag2 = false;

  //// 1

  if (l1 == 1) {
    // 1 & 1
    if (l2 == 1) {
      if (i1 > i2) {
        let tmp = i1;
        i1 = i2;
        i2 = tmp;
      }

      return line1.slice(i1, i2);
    } // 1 & 2
    else if (l2 == 2) {
      let i3 = getLineIdStation("Технологический институт 1")[0];
      let i4 = getLineIdStation("Технологический институт 2")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line1.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line2.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    } // 1 & 3
    else if (l2 == 3) {
      let i3 = getLineIdStation("Площадь восстания")[0];
      let i4 = getLineIdStation("Маяковская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line1.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line3.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    } // 1 & 4
    else if (l2 == 4) {
      let i3 = getLineIdStation("Владимирская")[0];
      let i4 = getLineIdStation("Достоевская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line1.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line4.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    } // 1 & 5
    else if (l2 == 5) {
      let i3 = getLineIdStation("Пушкинская")[0];
      let i4 = getLineIdStation("Звенигородская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line1.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line5.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 1 & 6
    else if (l2 == 6) {
      let i3 = getLineIdStation("Кировский завод")[0];
      let i4 = getLineIdStation("Путиловская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line1.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line6.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }

    //// 2
  } else if (l1 == 2) {
    // 2 & 2
    if (l2 == 2) {
      if (i1 > i2) {
        let tmp = i1;
        i1 = i2;
        i2 = tmp;
      }

      return line2.slice(i1, i2);
    }
    // 2 & 3
    else if (l2 == 3) {
      let i3 = getLineIdStation("Невский проспект")[0];
      let i4 = getLineIdStation("Гостинный двор")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line2.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line3.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 2 & 4
    else if (l2 == 4) {
      let i3 = getLineIdStation("Сенная площадь")[0];
      let i4 = getLineIdStation("Спасская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line2.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line4.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 2 & 5
    else if (l2 == 5) {
      let i3 = getLineIdStation("Сенная площадь")[0];
      let i4 = getLineIdStation("Садовая")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line2.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line5.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 2 & 6
    else if (l2 == 6) {
      let i3 = getLineIdStation("Московские ворота")[0];
      let i4 = getLineIdStation("Заставская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line2.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line6.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
  }
  //// 3
  else if (l1 == 3) {
    // 3 & 3
    if (l2 == 3) {
      if (i1 > i2) {
        let tmp = i1;
        i1 = i2;
        i2 = tmp;
      }

      return line3.slice(i1, i2);
    }
    // 3 & 4
    else if (l2 == 4) {
      let i3 = getLineIdStation("Площадь Александра Невского 1")[0];
      let i4 = getLineIdStation("Площадь Александра Невского 2")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line3.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line4.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 3 & 5
    else if (l2 == 5) {
      let i3 = getLineIdStation("Гостинный двор")[0];
      let i4 = getLineIdStation("Садовая")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line3.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line5.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();
      let r3 = line2.slice(8, 10);
      r3.reverse();

      return r1.concat(r3).concat(r2);
    }
    // 3 & 6
    else if (l2 == 6) {
      let i3 = getLineIdStation("Маяковская")[0];
      let i4 = getLineIdStation("Знаменская")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line3.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line6.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
  }
  //// 4
  else if (l1 == 4) {
    // 4 & 4
    if (l2 == 4) {
      if (i1 > i2) {
        let tmp = i1;
        i1 = i2;
        i2 = tmp;
      }

      return line4.slice(i1, i2);
    }
    // 4 & 5
    else if (l2 == 5) {
      let i3 = getLineIdStation("Спасская")[0];
      let i4 = getLineIdStation("Садовая")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line4.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line5.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
    // 4 & 6
    else if (l2 == 6) {
      let i3 = getLineIdStation("Лиговский проспект 1")[0];
      let i4 = getLineIdStation("Лиговский проспект 2")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line4.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line6.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
  }
  //// 5
  else if (l1 == 5) {
    // 5 & 6
    if (l2 == 6) {
      let i3 = getLineIdStation("Обводный канал")[0];
      let i4 = getLineIdStation("Каретная")[0];

      if (i1 > i3) {
        let tmp = i1;
        i1 = i3;
        i3 = tmp;
        flag1 = flag1 == true ? false : true;
      }
      if (i2 > i4) {
        let tmp = i2;
        i2 = i4;
        i4 = tmp;
        flag2 = flag2 == true ? false : true;
      }

      let r1 = line5.slice(i1, i3 + 1);
      if (flag1 == true) r1.reverse();
      let r2 = line6.slice(i2, i4 + 1);
      if (flag2 == false) r2.reverse();

      return r1.concat(r2);
    }
  }
}

// END OF 'mspb.js' FILE
